{% extends 'dashboard/base_dashboard.html' %}
{% load static %}

{% block title %}
    Journaliste | Journal | {{ block.super }}
{% endblock title %}

{% block stylesheets %}

    {{ block.super }}

    <link href="{% static 'dashboard/css/plugins/summernote/summernote-bs4.css' %}" rel="stylesheet">


{% endblock stylesheets %}


{% block content %}

    <div class="wrapper wrapper-content animated fadeInRight" style="width:100%;">

        <div class="row">
            <div class="col-lg-12">

                <div class=" float-left">
                    <a href="{% url 'dashboard:news_journalistes' %}">
                        <button class="btn btn-primary dim"><i class="fa fa-arrow-left"></i> Liste de journalistes

                        </button>
                    </a>

                </div>

                <div class=" float-right">
                    <a href="{% url 'dashboard:delete_journaliste' id_journaliste=journaliste.id %}">
                        <button id="btn_lancer_compagne" class="btn btn-danger dim">
                            <i class="fa fa-trash"></i> Supprimer
                        </button>
                    </a>

                    <a href="{% url 'dashboard:update_journaliste' id_journaliste=journaliste.id %}">
                        <button class="btn btn-success dim"><i class="fa fa-pencil"></i> Modifier</button>
                    </a>

                </div>
            </div>

        </div>

        <div class="row">

            <div class="col-lg-6">
                <div class="widget style1 navy-bg">
                    <div class="row">
                        <div class="col-4">
                            <i class="fa fa-users fa-5x"></i>
                        </div>
                        <div class="col-8 text-right">
                            <span>Visites totales</span>
                            <h2 class="font-bold">{{ visites_total }}</h2>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-lg-6">
                <div class="widget style1 navy-bg">
                    <div class="row">
                        <div class="col-4">
                            <i class="fa fa-newspaper-o fa-5x"></i>
                        </div>
                        <div class="col-8 text-right">
                            <span>Articles </span>
                            <h2 class="font-bold">{{ journaliste.news_set.all.count }}</h2>
                        </div>
                    </div>
                </div>
            </div>


        </div>


        <div class="row m-b-lg m-t-lg">

            <div class="col-md-6">

                <div class="profile-image">
                    <img src="/static/dashboard/img/a4.jpg" class="rounded-circle circle-border m-b-md" alt="profile">
                </div>
                <div class="profile-info">
                    <div class="">
                        <div>
                            <h2 class="no-margins">
                                {{ journaliste.first_name | title }} {{ journaliste.last_name | title }}
                            </h2>
                            <h4>Journaliste</h4>
                            <small>
                                {{ journaliste.description }}
                            </small>


                        </div>
                    </div>
                </div>
            </div>

            <div class="col-md-6">
                <div class="row">
                    <div class="col-md-6">

                        <ul class="list">
                            <li class="link-profile">
                                <a href="https://www.linkedin.com/in/anass-oujri/" title="LinkedIn">
                                    <i class="fa fa-linkedin link-icon"></i>
                                </a></li>
                            <li class="link-profile"><a href="https://www.facebook.com/anass.oujri" title="Facebook"><i
                                    class="fa fa-facebook link-icon"></i></a></li>
                            <li class="link-profile"><a href="https://twitter.com/anass_oujri" title="Twitter"><i
                                    class="fa fa-twitter link-icon"></i></a></li>
                        </ul>
                    </div>

                    <div class="col-md-6">

                        <ul class="list">
                            <li class="link-profile"><a href="https://plus.google.com/u/0/100540540693430950094"
                                                        title="Google Plus"><i class="fa fa-google-plus link-icon"></i></a>
                            </li>
                            <li class="link-profile"><a href="https://www.instagram.com/anassoujri/"
                                                        title="Instagram"><i class="fa fa-instagram link-icon"></i></a>
                            </li>
                            <li class="link-profile"><a href="https://www.youtube.com/channel/UCAXuJYP-uZ-E0WiZbXF-CDg"
                                                        title="Youtube"><i class="fa fa-youtube link-icon"></i></a></li>


                        </ul>
                    </div>

                    <div class="col-md-12">
                        <ul>

                            <li class="link-profile"><a href="http://urhkl.pythonanywhere.com/post/" title="Link"><i
                                    class="fa fa-link link-icon"></i></a></li>
                        </ul>
                    </div>
                </div>
            </div>


        </div>
        <div class="row">


            <div class="col-md-6 mar-b-30">
                <div class="list-group">
                    <a href="{% url 'dashboard:news_articles' %}"
                       class="list-group-item list-group-item-action active disabled">
                        Derniers articles <span class="pull-right">Voir tout</span>
                    </a>

                    {% for article in derniers_articles %}
                        <a href="{% url 'dashboard:news_infos_article' id_article=article.id %}"
                           style=" color: inherit;text-decoration: inherit; "
                           class="list-group-item list-group-item-action">
                            <strong>{{ article.small_title | truncatechars:"39" }} <i class="fa fa-calendar"></i> <span
                                    class="small-text">{{ article.date_publication }} <i
                                    class="fa fa-eye"></i> {{ article.view_number }} </span> </strong>
                        </a>
                    {% empty %}

                        <span
                                class="list-group-item list-group-item-action">
                            Aucun article.
                        </span>
                    {% endfor %}
                </div>
            </div>


            <div class="col-md-6 mar-b-30">
                <div class="list-group">
                    <a href="{% url 'dashboard:news_articles' %}"
                       class="list-group-item list-group-item-action active disabled">
                        Articles les plus vus <span class="pull-right">Voir tout</span>
                    </a>

                    {% for article in derniers_vues %}
                        <a href="{% url 'dashboard:news_infos_article' id_article=article.id %}"
                           style=" color: inherit;text-decoration: inherit; "
                           class="list-group-item list-group-item-action">
                            <strong>{{ article.small_title | truncatechars:"39" }} <i class="fa fa-calendar"></i> <span
                                    class="small-text">{{ article.date_publication }} <i
                                    class="fa fa-eye"></i> {{ article.view_number }} </span> </strong>
                        </a>
                    {% empty %}

                        <span
                                class="list-group-item list-group-item-action">
                            Aucun article.
                        </span>
                    {% endfor %}
                </div>
            </div>


        </div>

        <div class="row">
            <div class="col-md-12 mar-b-30">
                <div class="list-group">
                    <a href="{% url 'dashboard:tracking_visites' %}?url={{ journaliste.tracking_get_absolute_url }}"
                       class="list-group-item list-group-item-action active disabled">
                        Derniers visites <span class="pull-right">Voir tout</span>
                    </a>

                    <table class="table table-striped table-bordered">
                        <thead>
                        <th>Utilisateur</th>
                        <th>Date</th>
                        </thead>

                        <tbody>
                    {% for tracking in tracking_dernieres_visites %}
                        <tr>
                            <td>{% if not tracking.user %} Visiteur non connecté {% else %}
                                <a href="{% url 'dashboard:user_infos' id_user=tracking.user.profil.id %}">{{ tracking.user.first_name|title }} {{ tracking.user.last_name|title }}</a>{% endif %}
                            </td>
                            <td>{{ tracking.timestamp }}</td>
                        </tr>
                    {% empty %}
                            <tr>
                                <td valign="top" colspan="2" class="dataTables_empty text-center">Aucun élément à afficher</td>
                            </tr>
                    {% endfor %}

                        </tbody>

                    </table>
                </div>
            </div>
        </div>

    </div>






{% endblock content %}

{% block scripts %}

    {{ block.super }}
    <script>
        $('#dashboard_news').addClass("active");
        $('#news_liste_journalistes').addClass("active");
    </script>

    <!-- blueimp gallery -->
    <script src="{% static 'dashboard/js/plugins/blueimp/jquery.blueimp-gallery.min.js' %}"></script>





    <!-- Sparkline -->
    <script src="{% static 'dashboard/js/plugins/sparkline/jquery.sparkline.min.js' %}"></script>

    <script>
        $(document).ready(function () {


            $("#sparkline1").sparkline([34, 43, 43, 35, 44, 32, 44, 48], {
                type: 'line',
                width: '100%',
                height: '50',
                lineColor: '#1ab394',
                fillColor: "transparent"
            });


        });
    </script>





{% endblock scripts %}

